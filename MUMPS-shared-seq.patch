Create a shared version of the sequential library, MUST BE LAST IN SERIES

--- libseq/Makefile
+++ libseq/Makefile
@@ -12,10 +12,13 @@
 libmpiseq$(PLAT)$(LIBEXT): mpi.o mpic.o elapse.o
 	$(AR)$@ mpi.o mpic.o elapse.o
 	$(RANLIB) $@
+libmpiseq$(PLAT).so: mpi.o mpic.o elapse.o
+	$(FC) -shared $^ -Wl,-soname,libmpiseq$(PLAT).so.4.10.0 -o libmpiseq$(PLAT).so.4.10.0
+	ln -s libmpiseq$(PLAT).so.4.10.0 $@
 .f.o:
-	$(FC) $(OPTF)              -c $*.f $(OUTF)$*.o
+	$(FC) $(OPTF)              -fPIC -c $*.f $(OUTF)$*.o
 .c.o:
-	$(CC) $(OPTC) $(CDEFS) -I. -c $*.c $(OUTC)$*.o
+	$(CC) $(OPTC) $(CDEFS) -I. -fPIC -c $*.c $(OUTC)$*.o
 
 clean:
 	$(RM) *.o *$(LIBEXT)

--- Makefile
+++ Makefile
@@ -57,6 +57,7 @@
 
 libseqneeded:
 	(cd libseq; $(MAKE))
+	cp libseq/lib* $(libdir)
 
 # Build the libpord.a library and copy it into $(topdir)/lib
 $(libdir)/libpord$(PLAT).a:

--- src/Makefile.orig	2014-06-24 23:07:51.684304000 +0200
+++ src/Makefile	2014-06-24 23:10:12.263494831 +0200
@@ -59,7 +59,7 @@
 	$(RANLIB) $@
 
 $(libdir)/libmumps_common$(PLAT).so:	$(OBJS_COMMON)
-	$(FC) -shared $^ -Wl,-soname,libmumps_common$(PLAT)-4.10.0.so -L$(libdir) $(LORDERINGS) -lpthread $(MUMPS_LIBF77) $(OPTL) -lopen-rte $(OPTL) -lopen-pal $(MPIFLIB) $(MPICLIB) -o $(libdir)/libmumps_common$(PLAT)-4.10.0.so $(OPTL) -Wl,-z,defs
+	$(FC) -shared $^ -Wl,-soname,libmumps_common$(PLAT)-4.10.0.so -L$(libdir) $(LORDERINGS) -lpthread $(MUMPS_LIBF77) $(LIBSEQ) $(OPTL) -o $(libdir)/libmumps_common$(PLAT)-4.10.0.so $(OPTL) -Wl,-z,defs
 	ln -s libmumps_common$(PLAT)-4.10.0.so $@
 
 $(libdir)/lib$(ARITH)mumps$(PLAT).a:    $(OBJS)
@@ -67,7 +67,7 @@
 	$(RANLIB) $@
 
 $(libdir)/lib$(ARITH)mumps$(PLAT).so:    $(OBJS)
-	$(FC) -shared $^ -Wl,-soname,lib$(ARITH)mumps$(PLAT)-4.10.0.so -L$(libdir) -lmumps_common$(PLAT) $(MUMPS_LIBF77) $(OPTL) -lopen-rte $(OPTL) -lopen-pal $(LORDERINGS) $(MPIFLIB) -lblas $(SCALAP) -o $(libdir)/lib$(ARITH)mumps$(PLAT)-4.10.0.so $(OPTL) -Wl,-z,defs
+	$(FC) -shared $^ -Wl,-soname,lib$(ARITH)mumps$(PLAT)-4.10.0.so -L$(libdir) -lmumps_common$(PLAT) $(LORDERINGS) $(MUMPS_LIBF77) $(LIBSEQ) $(OPTL) -lblas $(SCALAP) -o $(libdir)/lib$(ARITH)mumps$(PLAT)-4.10.0.so $(OPTL) -Wl,-z,defs
 	ln -s lib$(ARITH)mumps$(PLAT)-4.10.0.so $@
 
 $(ARITH)mumps_load.o:		$(ARITH)mumps_comm_buffer.o \


